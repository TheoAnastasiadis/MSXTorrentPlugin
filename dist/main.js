(()=>{var e={148:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(i,n){function s(e){try{l(o.next(e))}catch(e){n(e)}}function a(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,o,i,n,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName=void 0,t.moduleName="toWebVTT";var i=function(e,r){return new Promise((function(o,i){var n=new FileReader,s=function(e){var t=e.target.result;n.removeEventListener("loadend",s),o("string"!==r?new Uint8Array(t):t)},a=function(){n.removeEventListener("error",a),i(new Error(t.moduleName+": Error while reading the Blob object"))};n.addEventListener("loadend",s),n.addEventListener("error",a),"string"!==r?n.readAsArrayBuffer(e):n.readAsText(e)}))},n=function(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))},s=function(e){return e.replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").concat("\r\n\r\n")};t.default=function(e){return r(void 0,void 0,void 0,(function(){var r,a,l,c;return o(this,(function(o){switch(o.label){case 0:if(!FileReader)throw new Error(t.moduleName+": No FileReader constructor found");if(!TextDecoder)throw new Error(t.moduleName+": No TextDecoder constructor found");if(!(e instanceof Blob))throw new Error(t.moduleName+": Expecting resource to be a Blob but something else found.");a="WEBVTT FILE\r\n\r\n",o.label=1;case 1:return o.trys.push([1,3,,5]),[4,i(e,"string")];case 2:return l=o.sent(),r=a.concat(s(l)),[3,5];case 3:return o.sent(),[4,i(e,"buffer")];case 4:return l=o.sent(),c=new TextDecoder("utf-8").decode(l),r=a.concat(s(c)),[3,5];case 5:return[2,Promise.resolve(n(r))]}}))}))}},110:e=>{e.exports={addOffset(e,t){const r=document.getElementById(e);return r&&Array.from(r.textTracks).forEach((e=>{if("showing"===e.mode)return Array.from(e.cues).forEach((e=>{e.startTime+=t||.5,e.endTime+=t||.5})),!0})),!1},removeOffset(e,t){const r=document.getElementById(e);return r&&Array.from(r.textTracks).forEach((e=>{if("showing"===e.mode)return Array.from(e.cues).forEach((e=>{e.startTime-=t||.5,e.endTime-=t||.5})),!0})),!1},moveUp(e){const t=document.getElementById(e);return t&&Array.from(t.textTracks).forEach((e=>{if("showing"===e.mode)return Array.from(e.cues).forEach((e=>{isNaN(e.line)?e.line=15:e.line-=1})),!0})),!1},moveDown(e){const t=document.getElementById(e);return t&&Array.from(t.textTracks).forEach((e=>{if("showing"===e.mode)return Array.from(e.cues).forEach((e=>{isNaN(e.line)?e.line=16:e.line+=1})),!0})),!1},moveLeft(e,t){const r=document.getElementById(e);return r&&Array.from(r.textTracks).forEach((e=>{if("showing"===e.mode)return Array.from(e.cues).forEach((e=>{isNaN(e.position)?e.position=50-t:e.position-=t||5})),!0})),!1},moveRight(e,t){const r=document.getElementById(e);return r&&Array.from(r.textTracks).forEach((e=>{if("showing"===e.mode)return Array.from(e.cues).forEach((e=>{isNaN(e.position)?e.position=50+t:e.position+=t||5})),!0})),!1},setFontSize(e){const t=document.createElement("style");t.type="text/css",t.innerHTML=`::cue { font-size: ${e}px; }`,document.body.appendChild(t)},setFontColor(e){const t=document.createElement("style");t.type="text/css",t.innerHTML=`::cue { color: ${e}; }`,document.body.appendChild(t)}}}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}(()=>{"use strict";var e=r(110);function t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o{constructor(e,r){t(this,"streamTorrent",(async e=>{let t=await navigator.serviceWorker.register("sw.js",{scope:"./"});for(;!t.active;);await this.client.loadWorker(t.active),console.log("Service Worker ready"),this.client.on("error",(function(e){console.error("ERROR: "+e.message)})),this.client.add(this.torrentId,(async t=>{t.on("warning",(e=>{console.warn(e)})),t.on("error",(e=>{console.error(e)})),t.files[this.fileIdx].streamTo(e)}))})),this.torrentId=e,this.fileIdx=r,this.client=new window.WebTorrent}}function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6e3,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function*(){let n=0;const s=new AbortController;async function a(e){if(!(n<r)||s.signal.aborted){if(s.signal.aborted)throw"aborted";return await new Promise(((e,t)=>setTimeout(e,o))),await a(e)}try{n++;const r=await t(e);if(s.signal.aborted)throw"aborted";return i&&s.abort(),r}finally{n--}}for(const t of e)yield a(t)}()}function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t(o,"IS_CLIENT_COMPATIBLE",(()=>WebTorrent.WEBRTC_SUPPORT&&!!navigator.serviceWorker));class s{constructor(e,t,r){n(this,"responseTimeout",6e3),n(this,"retryTimeout",2e3),n(this,"concurrency",8),n(this,"MOST_POPULAR_GETAWAYS",["192.168.1.1","192.168.0.1","192.168.2.1","192.168.1.254","192.168.10.1","192.168.100.1","192.168.0.50","192.168.0.254","192.168.88.1","192.168.123.254","192.168.8.1","10.0.0.1","192.168.1.2","192.168.11.1","10.0.0.2","192.168.1.240","192.168.1.250","192.168.3.1","192.168.20.1","10.0.0.138","192.168.254.254","192.168.15.1","172.19.3.1","192.168.1.245","10.1.1.1","192.168.10.100","192.168.16.1","10.10.10.254","192.168.0.20","192.168.0.100","192.168.178.1","192.168.0.30","192.168.1.20","192.168.2.2","192.168.1.253","192.168.0.10","192.168.2.254","10.10.10.1","192.168.0.99","192.168.1.100","192.168.31.1","192.168.168.168","192.168.100.252","192.168.62.1","192.168.50.1","192.168.111.1","192.168.1.252","192.168.1.230","192.168.30.1","192.168.10.30","192.168.8.254","192.168.0.228","10.0.10.254","192.168.0.101","172.16.0.1","192.168.200.1","192.168.0.32","192.168.1.226","10.0.1.1","10.90.90.91","169.254.128.132","192.168.0.227","192.168.169.1","192.168.6.1","192.168.168.1","192.168.1.200","192.168.1.10","192.168.1.99","192.168.1.241","192.168.7.2","192.168.61.1","192.168.80.240","222.222.222.1","10.90.90.90","192.168.9.2","10.1.0.99","172.23.56.254","192.168.0.2","192.168.18.1","192.168.10.110","10.10.1.1","192.168.16.254","10.1.10.1","192.0.2.1","192.168.5.1","192.168.1.251","192.168.16.168","192.168.190.1","192.168.22.1","192.168.1.225","192.168.123.1","192.168.42.1","192.168.0.40","192.168.40.1","192.168.0.35","192.168.32.1","192.168.0.4","10.8.0.99","192.168.0.3"]),n(this,"updatePossibleIps",(()=>{if(this.possibleLocalIps=[],!this.getaway)throw"No getaway detected. Impossible to parse local ips.";const e=this.getaway.split(".").splice(0,3).join(".");for(let t=0;t<=255;t++)this.possibleLocalIps.push(e+"."+t)})),n(this,"checkAddress",(e=>{const t=this.responseTimeout;return new Promise(((r,o)=>{const i=new WebSocket(`wss://${e}/`),n=Date.now();setTimeout((()=>i.close()),t),i.onclose=i=>{Date.now()-n<t?(console.log(`Possible local ip: ${e}`),r(e)):o(e)}}))})),n(this,"checkServer",(async e=>{const t=new AbortController;setTimeout((()=>t.abort()),this.responseTimeout);const r=await fetch(`http://${e}`,{signal:t.signal});if(!t.signal.aborted)return{ip:e,text:await r.text()+""}})),n(this,"detectGetaway",(async()=>{this.getaway=await Promise.any(i(this.MOST_POPULAR_GETAWAYS,this.checkAddress,this.concurrency,this.retryTimeout,!0)),this.updatePossibleIps()})),this.responseTimeout=e||this.responseTimeout,this.retryTimeout=t||this.retryTimeout,this.concurrency=r||this.concurrency,this.getaway=null,this.privateIps=[],this.possibleLocalIps=[]}}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l{constructor(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a(this,"TIMEOUT",6e3),a(this,"MAX_CONNECTIONS",3),a(this,"PORT",8090),a(this,"init",(async function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e.url)try{const t=await fetch(`http://${e.url}:${e.PORT}/echo`);e.version=(await t.text()).match(/MatriX\.\d{1,3}/)[0]}catch(t){console.warn(`No server at ${e.url}`)}if(e.version)console.log(`Server ready at '${e.url}'`);else{if(!t)throw`No server at ${e.url}}`;if(await e.detectUrl(),!e.version)throw"No server in network";console.log(`Server ready at '${e.url}'`)}})),a(this,"detectUrl",(async()=>{const e=new s(this.TIMEOUT,this.TIMEOUT/4);await e.detectGetaway();const t=await Promise.any(i(e.possibleLocalIps,(async t=>{await e.checkAddress(t);const r=await e.checkServer(`${t}:8090/echo`);if(r?.text.match(/MatriX\.\d{1,3}/))return{ip:t,version:r.text};throw`No TorrServer here (${t})`}),this.MAX_CONNECTIONS,this.TIMEOUT,!0));this.url=t.ip,this.version=t.version})),a(this,"streamTorrent",(async(e,t,r)=>{const o={link:e,index:t,play:!0};r.src=`http://${this.url}:${this.PORT}/stream?${new URLSearchParams(o)}`,console.log(r.src);const i=await(await fetch(`http://${this.url}:${this.PORT}/stream?${new URLSearchParams({...o,m3u:!0})}`)).text(),n="#EXTVLCOPT:input-slave=";i.substring(i.indexOf(n)+n.length).split("#").map((e=>e.trim())).filter((e=>e.match(/(?:\.srt)|(?:\.vtt)/))).map((e=>({url:e,language:e.match(/(?<lang>[a-z]{2})\.(?:(?:srt)|(?:vtt))/)?.groups?.lang}))).map((e=>{TVXVideoPlugin.executeAction(`player:commit:message:addTrack:${encodeURIComponent(e.url)}:${e.language}`)}))})),this.url=t,this.version=null}}const c=(e,t,r,o)=>({id:e,headline:t,text:r,type:"space",layout:o}),u=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{id:e,label:r?null:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)||e,key:e,action:`player:commit:message:input:${e}`,type:"button",layout:t,...r&&{icon:r},alignment:"justify",centration:"label",iconSize:"small"}};var d=r(148);function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class m{constructor(e,t,r){h(this,"trackHTML",(()=>{const e=document.createElement("track");return e.dataset.originalurl=this.url,e.srclang=this.language,e.kind="subtitles",e})),h(this,"setActive",(async()=>{const e=document.querySelectorAll(`[data-originalurl="${this.url}"`)[0];console.assert(e),e.src=-1!=this.url.indexOf(".vtt")?this.url:await(async e=>{const t=await fetch(e),r=await t.blob();return await d.default(r)})(this.url),Array.from(document.getElementsByTagName("track")).forEach((e=>{e.track.mode="disabled"})),e.track.mode="showing",TVXVideoPlugin.setupExtensionLabel(`${this.language} {ico:subtitles}`)})),h(this,"isActive",(()=>"showing"==document.querySelectorAll(`[data-originalurl="${this.url}"`)[0].track.mode)),this.url=e,this.language=t,this.embeded=r}}const p="torrent:",f=(e,t)=>{TVXVideoPlugin.error(e),t&&t()},y=(e,t)=>{TVXVideoPlugin.success(e),t&&t()};class g{constructor(){this.videoElement=document.getElementById("video"),this.torrServerLocation=null,this.serverLocationInput="",this.torrentId=null,this.fileIdx=0,this.fallbackUrl=null,this.subTracks=[],this.player=null,this.init=()=>{},this.playLocaly=async()=>{this.player=new o(this.torrentId,this.fileIdx),this.videoElement.src="",await this.player.streamTorrent(this.videoElement)},this.playRemotely=async()=>{console.log("Setting remote player"),this.player=new l("auto"==this.serverLocation?null:this.serverLocation),"auto"==this.serverLocation&&("No server ip was supplied, the system will attempt to locate one automatically.",TVXVideoPlugin.warn("No server ip was supplied, the system will attempt to locate one automatically."),TVXVideoPlugin.startLoading());try{await this.player.init(),y(`TorrServer ${"auto"==this.serverLocation?"found":"available"} at ${this.player.url}`,(()=>TVXVideoPlugin.executeAction("player:show"))),this.videoElement.src="",await this.player.streamTorrent(this.torrentId,this.fileIdx,this.videoElement)}catch(e){f("auto"==this.serverLocation?"No server was found in this network":"No server was found at the specified IP",(()=>{console.error(e)}))}},this.playFallback=e=>{this.videoElement.src=e},this.addSubTrack=e=>{this.subTracks.push(e),this.videoElement.append(e.trackHTML())},this.ready=()=>{TVXVideoPlugin.requestData("video:info",(e=>{const t=e?.video?.info;this.torrentId=TVXPropertyTools.getFullStr(t,p+"id",null)||new TVXUrlParams(window.location.href).getFullStr("torrent",null),this.fileIdx=TVXPropertyTools.getNum(t,p+"fileIdx",null)||new TVXUrlParams(window.location.href).getNum("fileIdx",0),this.fallbackUrl=TVXPropertyTools.getFullStr(t,p+"fallbackUrl",null)||new TVXUrlParams(window.location.href).getFullStr("fallbackUrl",null),this.torrentId||this.fallbackUrl||f("Error: No torrent id (infoHash, magnerURI or .torrent file) specified.",(()=>{throw"No torrent id"}));const r=!this.torrentId&&!!this.fallbackUrl;r&&console.warn(`No torrent id set; will skip to fallback ${this.fallbackUrl}`);for(const e of Object.keys(t.properties).filter((e=>0==e.indexOf("torrent:subtitle:")))){const r=new m(t.properties[e],e.split(":")[2],!1);this.addSubTrack(r)}const i=TVXPropertyTools.getBool(t,p+"server:precedence",!1),n=o.IS_CLIENT_COMPATIBLE(),s=TVXPropertyTools.getFullStr(t,p+"server:location","auto");this.serverLocation=s,this.serverLocationInput=s,i&&!r?this.playRemotely().then(TVXVideoPlugin.startPlayback):n&&!r?this.playLocaly().then(TVXVideoPlugin.startPlayback):this.fallbackUrl?(this.playFallback(this.fallbackUrl),TVXVideoPlugin.startPlayback()):f("Your system does not support WebTorrent. Will try to connect to a TorrServer as fallback.",(()=>{this.playRemotely().then(TVXVideoPlugin.startPlayback)}))}))},this.play=()=>this.videoElement.play(),this.pause=()=>this.videoElement.pause(),this.stop=()=>{this.videoElement.pause(),TVXVideoPlugin.stopPlayback()},this.getDuration=()=>this.videoElement.duration,this.getPosition=()=>this.videoElement.currentTime,this.getSpeed=()=>this.videoElement.playbackRate,this.setSpeed=e=>{this.videoElement.playbackRate=e},this.setPosition=e=>{this.videoElement.currentTime=e},this.isMuted=()=>this.videoElement.muted,this.setMuted=()=>{this.videoElement.muted=!0},this.getUpdateData=()=>({position:this.getPosition(),duration:this.getDuration(),speed:this.getSpeed()}),this.handleEvent=function(e){},this.handleData=async t=>{if(0==t?.message.indexOf("input:"))this.serverLocationInput=(r=this.serverLocationInput,(o=t.message.substring(6))in["1","2","3","4","5","6","7","8","9","0"]?"auto"==r?o:r+o:"delete"==o?"auto"==r?"":r.substring(0,r.length-1):"period"==o?"auto"==r?".":r+".":"auto"==o?"auto":r),TVXVideoPlugin.executeAction("update:panel:torrserverlocation",{label:this.serverLocationInput});else if("serverLocationChange"==t?.message)this.serverLocation=this.serverLocationInput,this.playRemotely();else if(0==t?.message.indexOf("addTrack:")){const e=t.message.split(":")[1],r=t.message.split(":")[2],o=new m(decodeURIComponent(e),r,!0);this.addSubTrack(o)}else if(0==t?.message.indexOf("setTrack:")){const e=this.subTracks.find((e=>e.url==decodeURIComponent(t.message.split(":")[1])));await e.setActive()}else 0==t?.message.indexOf("timing:")?"plus"==t.message.split(":")[1]?(e.addOffset("video",.1),y("Subtitles delayed by 100ms")):(e.removeOffset("video",.1),y("Subtitles hasten by 100ms")):f(`Unkown message ${t?.message}`);var r,o},this.handleRequest=(e,t,r)=>{var i;"options"==e?r(function(){return{cache:!1,reuse:!1,headline:"Options",pages:[{items:[{id:"title1",title:"Content Options",titleFooter:"Select subtitle track and edit cue timing",type:"space",layout:"0,0,8,1"},{id:"subtitles",headline:"Subtitle Track",text:"Select subtitle track",action:"panel:request:player:subtitles",type:"control",layout:"0,1,8,1",extensionIcon:"subtitles"},{id:"plus",label:"100ms",action:"player:commit:message:timing:plus",key:"forward",type:"control",layout:"0,2,4,1",icon:"add"},{id:"minus",label:" 100ms",action:"player:commit:message:timing:minus",key:"rewind",type:"control",layout:"4,2,4,1",icon:"remove"},{id:"tip",text:"{txt:msx-green:Tip:} Use {ico:fast-forward} to delay or {ico:fast-rewind} to hasten subtitles while this panel is open (step {chr:plusmn}100ms)",action:"panel:request:player:torrent",type:"space",layout:"0,3,8,1"},{id:"title2",title:"Player Options",titleFooter:"Select how you want to stream torrent files",type:"space",layout:"0,4,8,1"},{id:"torrent",headline:"Torrent",text:"Configure how torrents should be streamed.",action:"panel:request:player:torrent",type:"control",layout:"0,5,8,1",extensionIcon:"account-tree",enable:!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])}]}]}}(!!this.fallbackUrl)):"torrent"==e?r((i=this.serverLocationInput,{cache:!1,reuse:!1,headline:"Torrent streaming options",pages:[{items:[c("webtorrent","WebTorrent Support",`Your system ${o.IS_CLIENT_COMPATIBLE()?"{txt:msx-green:supports}":"{txt:msx-red:does not support}"} WebTorrent streaming directly to the client.`,"0,0,8,1"),c("torrserver","TorrServer Setup","Local (private) ip of your TorrServer (ex. 192.168.1.9:8090)","0,1,8,1"),{focus:!1,id:"torrserverlocation",type:"button",label:i,layout:"0,2,8,1"},u("1","0,3,1,1"),u("2","1,3,1,1"),u("3","2,3,1,1"),u("4","3,3,1,1"),u("5","4,3,1,1"),u("6","5,3,1,1"),u("7","6,3,1,1"),u("8","7,3,1,1"),u("9","0,4,1,1"),u("0","1,4,1,1"),u("period","2,4,1,1",null,"."),u("delete","3,4,1,1","backspace"),{id:"auto",label:'"auto"',action:"player:commit:message:input:auto",type:"control",layout:"4,4,2,1",icon:"auto-awesome"},{id:"submit",label:"Submit",action:"player:commit:message:serverLocationChange",type:"control",layout:"6,4,2,1",icon:"check-circle-outline"},c("warning","",'{txt:msx-yellow:Warning:} The "auto" option is an experimental feature that will try to locate a TorrServer instance within your local network. It might not always be possible to discover your server.',"0,5,8,1")]}]})):"subtitles"==e?r({cache:!1,reuse:!1,headline:"Available subtitle tracks",template:{enumerate:!1,type:"control",layout:"0,0,2,1"},items:[...this.subTracks.map((e=>({title:e.language,titleFooter:e.embeded?"{txt:msx-green:Embeded}":"{txt:msx-yellow:External}",extensionIcon:e.isActive()?"check":"blank",action:`[player:commit:message:setTrack:${encodeURIComponent(e.url)}|player:show]`})))]}):f(`Unkown request "${e}"`,r)}}}TVXPluginTools.onReady((function(){TVXVideoPlugin.setupPlayer(new g),TVXVideoPlugin.init()}))})()})();